{% include 'base_embedded.html' %}

<div class="premium-results">
    <div class="premium-header">
        <h2>üìä Complete Resume Analysis</h2>
        <p>Comprehensive review with actionable improvements</p>
    </div>
    
    <!-- Overall Score Section -->
    <div class="section">
        <h3>üéØ Overall Resume Score</h3>
        <div class="grid-2">
            <div class="content-block">
                <div style="text-align: center;">
                    {% if overall_score is number %}
                        <div class="score-badge score-{{ 'excellent' if overall_score >= 85 else 'good' if overall_score >= 70 else 'fair' if overall_score >= 50 else 'poor' }}">
                            {{ overall_score }}/100
                        </div>
                        <div class="progress-container" style="margin-top: 15px;">
                            <div class="progress-bar progress-{{ 'excellent' if overall_score >= 85 else 'good' if overall_score >= 70 else 'fair' if overall_score >= 50 else 'poor' }}" 
                                 style="width: {{ overall_score }}%;">
                                {{ overall_score }}%
                            </div>
                        </div>
                    {% else %}
                        <div class="score-badge score-good">
                            {{ overall_score }}
                        </div>
                        <div class="progress-container" style="margin-top: 15px;">
                            <div class="progress-bar progress-good" style="width: 75%;">
                                75%
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
            <div class="content-block">
                <h4>üìà Score Breakdown</h4>
                <ul class="bullet-list">
                    {% for category, score in score_breakdown.items() %}
                    <li><strong>{{ category.replace('_', ' ').title() }}:</strong> {{ score }}/100</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
    
    <!-- Key Strengths -->
    {% if key_strengths %}
    <div class="section">
        <h3>üí™ Key Strengths</h3>
        <div class="grid-2">
            {% for strength in key_strengths[:6] %}
            <div class="highlight-box">
                <strong>{{ strength.category }}:</strong> {{ strength.description }}
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    
    <!-- Critical Issues -->
    {% if critical_issues %}
    <div class="section">
        <h3>üö® Critical Issues to Fix</h3>
        <ol class="numbered-list">
            {% for issue in critical_issues %}
            <li>
                <div class="error-box">
                    <strong>{{ issue.issue_type }}:</strong> {{ issue.description }}
                    {% if issue.solution %}
                    <br><strong>Fix:</strong> {{ issue.solution }}
                    {% endif %}
                </div>
            </li>
            {% endfor %}
        </ol>
    </div>
    {% endif %}
    
    <!-- Detailed Section Analysis -->
    <div class="section">
        <h3>üîç Section-by-Section Analysis</h3>
        
        {% if section_analysis %}
        {% for section in section_analysis %}
        <div class="content-block" style="margin-bottom: 25px;">
            <h4>{{ section.section_name }}</h4>
            
            {% if section.score %}
            {% if section.score is number %}
                <div class="score-badge score-{{ 'excellent' if section.score >= 85 else 'good' if section.score >= 70 else 'fair' if section.score >= 50 else 'poor' }}" style="margin-bottom: 15px;">
                    {{ section.score }}/100
                </div>
            {% else %}
                <div class="score-badge score-good" style="margin-bottom: 15px;">
                    {{ section.score }}
                </div>
            {% endif %}
            {% endif %}
            
            {% if section.strengths %}
            <div class="highlight-box">
                <strong>‚úÖ Strengths:</strong>
                <ul class="bullet-list" style="margin-top: 10px;">
                    {% for strength in section.strengths %}
                    <li>{{ strength }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            {% if section.weaknesses %}
            <div class="warning-box">
                <strong>‚ö†Ô∏è Areas for Improvement:</strong>
                <ul class="bullet-list" style="margin-top: 10px;">
                    {% for weakness in section.weaknesses %}
                    <li>{{ weakness }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            {% if section.recommendations %}
            <div class="info-box">
                <strong>üí° Recommendations:</strong>
                <ul class="bullet-list" style="margin-top: 10px;">
                    {% for rec in section.recommendations %}
                    <li>{{ rec }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
        {% endfor %}
        {% endif %}
    </div>
    
    <!-- ATS Optimization -->
    {% if ats_analysis %}
    <div class="section">
        <h3>ü§ñ ATS Optimization</h3>
        <div class="grid-2">
            <div class="info-box">
                <h4>ATS Score</h4>
                {% if ats_analysis.ats_score is number %}
                    <div class="score-badge score-{{ 'excellent' if ats_analysis.ats_score >= 85 else 'good' if ats_analysis.ats_score >= 70 else 'fair' if ats_analysis.ats_score >= 50 else 'poor' }}">
                        {{ ats_analysis.ats_score }}/100
                    </div>
                    <div class="progress-container" style="margin-top: 15px;">
                        <div class="progress-bar progress-{{ 'excellent' if ats_analysis.ats_score >= 85 else 'good' if ats_analysis.ats_score >= 70 else 'fair' if ats_analysis.ats_score >= 50 else 'poor' }}" 
                             style="width: {{ ats_analysis.ats_score }}%;">
                            {{ ats_analysis.ats_score }}%
                        </div>
                    </div>
                {% else %}
                    <div class="score-badge score-good">
                        {{ ats_analysis.ats_score }}
                    </div>
                    <div class="progress-container" style="margin-top: 15px;">
                        <div class="progress-bar progress-good" style="width: 75%;">
                            75%
                        </div>
                    </div>
                {% endif %}
            </div>
            <div class="warning-box">
                <h4>‚ö†Ô∏è ATS Issues Found</h4>
                {% if ats_analysis.issues %}
                <ul class="bullet-list">
                    {% for issue in ats_analysis.issues %}
                    <li>{{ issue }}</li>
                    {% endfor %}
                </ul>
                {% else %}
                <p>No major ATS issues detected!</p>
                {% endif %}
            </div>
        </div>
    </div>
    {% endif %}
    
    <!-- Keyword Analysis -->
    {% if keyword_analysis %}
    <div class="section">
        <h3>üîë Keyword Analysis</h3>
        <div class="grid-3">
            {% if keyword_analysis.missing_keywords %}
            <div class="warning-box">
                <h4>‚ùå Missing Keywords</h4>
                <ul class="bullet-list">
                    {% for keyword in keyword_analysis.missing_keywords[:5] %}
                    <li>{{ keyword }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            {% if keyword_analysis.present_keywords %}
            <div class="highlight-box">
                <h4>‚úÖ Present Keywords</h4>
                <ul class="bullet-list">
                    {% for keyword in keyword_analysis.present_keywords[:5] %}
                    <li>{{ keyword }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            {% if keyword_analysis.recommended_additions %}
            <div class="info-box">
                <h4>üí° Recommended Additions</h4>
                <ul class="bullet-list">
                    {% for keyword in keyword_analysis.recommended_additions[:5] %}
                    <li>{{ keyword }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}
    
    <!-- Action Plan -->
    {% if action_plan %}
    <div class="section">
        <h3>üìã Priority Action Plan</h3>
        <ol class="numbered-list">
            {% for action in action_plan %}
            <li>
                <div class="content-block">
                    <strong>{{ action.priority }} Priority:</strong> {{ action.action }}
                    {% if action.impact %}
                    <br><em>Impact:</em> {{ action.impact }}
                    {% endif %}
                </div>
            </li>
            {% endfor %}
        </ol>
    </div>
    {% endif %}
    
    <!-- Success Prediction -->
    {% if success_prediction %}
    <div class="highlight-box" style="margin: 25px 0;">
        <h3>üèÜ Interview Generation Potential</h3>
        <p style="font-size: 1.1rem; margin-bottom: 0;">{{ success_prediction }}</p>
    </div>
    {% endif %}
    
    <div class="actions">
        <button class="btn btn-success" onclick="window.print()">üñ®Ô∏è Print Analysis</button>
        <button class="btn btn-danger" onclick="exportToPDF('.premium-results')">üìÑ Export PDF</button>
        <button class="btn" onclick="copyToClipboard('.premium-results')">üìã Copy Analysis</button>
        <a href="/" class="btn">üè† Return to App</a>
    </div>
</div>
